{% extends 'Message:Mothership:Commerce::product:edit-layout' %}
{% import 'Message:Mothership:Commerce::options' as option %}

{% block edit %}
	{{ form_start(form) }}
	<table>
		<thead>
			<tr>
				<th>{{ 'ms.commerce.product.units.sku.label'|trans }}</th>
				<th>{{ 'ms.commerce.product.units.option.label'|trans }}</th>
				<th>{{ 'ms.commerce.product.units.prices.label'|trans }}</th>
				<th>{{ 'ms.commerce.product.details.weight-grams.label'|trans }}</th>
				<th>{{ 'ms.commerce.product.units.visible.label'|trans }}</th>
				<th>{{ 'ms.commerce.product.units.delete.label'|trans }}</th>
			</tr>
		</thead>
		<tbody>
			{% for unit in units %}
				<tr>
					<td>{{ form_widget(form[unit.id]['sku']) }}</td>
					<td>
						{{ form_widget(form[unit.id]['optionForm']) }}
					</td>
					<td>
					{% for name, value in unit.price %}
						<div class="inline">
							{{ form_row(form[unit.id]['price'][name]) }}
						</div>
					{% endfor %}
					</td>
					<td>{{ form_widget(form[unit.id]['weight']) }}</td>
					<td>{{ form_widget(form[unit.id]['visible']) }}</td>
					<td><a class="button delete small" href="{{ url('ms.commerce.product.unit.delete', {productID: unit.product.id, unitID: unit.id})}}" data-confirm="Are you sure you want to delete this unit?">Delete</a></td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
	<button type="submit" class="button small save" id="save-content">
		{{ 'ms.commerce.product.button.save'|trans }}
	</button>
	{{ form_end(form) }}

<div class="display-group">
	<h2 class="title">Add Unit</h2>

	<div class="content-wrap">


	{{ form_start(addForm) }}

	{{ form_row(addForm.sku) }}

	{{ option.renderRepeatable(addForm.options) }}

	{{ form_rest(addForm) }}
	<button type="submit" class="button small submit">
		{{ 'ms.commerce.product.button.sku'|trans }}
	</button>

	{{ form_end(addForm) }}
</div>
</div>

{% endblock %}
